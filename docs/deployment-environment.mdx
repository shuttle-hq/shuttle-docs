---
title: "Deployment environment"
description: "Details about the environment your app runs in"
icon: "box"
---

## Infrastructure

### Deployments

Deployments run in AWS ECS with Fargate VMs.
The default compute configuration is 0.25 vCPU and 0.5 GB RAM.
This will soon be made configurable.
If you need more compute out of the gate, [reach out to us.](https://www.shuttle.dev/contact)

<Warning>
Community tier workloads run on Fargate SPOT capacity providers, and are
subject to spontaneous interruptions when AWS claims capacity in the region.
Community tier workloads are automatically rescheduled to a running state when
capacity is made available. If your workload is affected by a SPOT
interruption, Shuttle will send an email notification.
</Warning>

**Rolling deployments**:
When a new deployment is made, it will be started alongside the previous one until it is considered healthy.
After that, the previous deployment will start shutting down.
This means that there is a window of time where there are two instances running in parallel.
If the new deployment fails to become healthy, it will be retried 3 times while the the previous one will stays up.

### HTTPS traffic

HTTPS traffic is proxied to your app on the project's default subdomain and any [custom domains]() that have been added.

### Request Headers

#### X-Forwarded-For
`X-Forwarded-For` is a header that allows you to get the original IP of the HTTP request. Deployed Shuttle projects sit behind a proxy, meaning that when you try to get the IP address normally you may end up with the proxy IP instead of the requester IP. With the `X-Forwarded-For` header, you can now always get the requester IP by parsing the given header value.

To implement your own custom rate limiting, our [blog post on how to write API rate limiting yourself](https://www.shuttle.dev/blog/2024/02/22/api-rate-limiting-rust) may prove useful. You can also additionally implement your own middleware that utilises the `governor` crate, as seen on [`tower-governor`](https://docs.rs/tower_governor/latest/tower_governor/) and [`actix-governor`](https://docs.rs/actix-governor/latest/actix_governor/).

## Environment variables

These are the environment variables set in the Shuttle runtime container.
Check for `SHUTTLE=true` or use [the shuttle feature flag](./project-configuration#cargo-feature-flags) for custom behavior when running on Shuttle.

```bash
SHUTTLE="true"
SHUTTLE_PROJECT_ID="<project id>"
SHUTTLE_PROJECT_NAME="<project name>"
RUST_LOG="INFO"
```

## Secrets

See [Shuttle Secrets](/resources/shuttle-secrets)

## Customize Runtime container

See [Hook scripts](/docs/builds#experimental-hook-scripts)
